<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choose Your Role - HelpMarq</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="auth-container">
        <div class="auth-card role-select-card">
            <div class="auth-header">
                <h1>Welcome to HelpMarq!</h1>
                <p class="tagline">Choose how you want to get started</p>
            </div>
            
            <div class="role-options">
                <div class="role-card" onclick="selectRole('owner')">
                    <div class="role-icon">üìä</div>
                    <h3>Project Owner</h3>
                    <p>Upload projects and get expert feedback</p>
                    <button class="btn-primary">I'm a Project Owner</button>
                </div>
                
                <div class="role-card" onclick="selectRole('reviewer')">
                    <div class="role-icon">‚≠ê</div>
                    <h3>Reviewer</h3>
                    <p>Review projects and earn XP</p>
                    <button class="btn-primary">I'm a Reviewer</button>
                </div>
            </div>
        </div>
    </div>

    <script type="module">
        import { getCurrentUser } from './lib/auth.js';

        window.addEventListener('load', async () => {
            const user = await getCurrentUser();
            if (!user) {
                window.location.href = 'login.html';
                return;
            }

            // Check if role already exists
            const existingRole = localStorage.getItem('userRole');
            if (existingRole) {
                window.location.href = 'index.html';
                return;
            }
        });

        window.selectRole = function(role) {
            localStorage.setItem('userRole', role);
            sessionStorage.setItem('roleJustSelected', 'true');
            
            if (role === 'owner') {
                window.location.href = 'index.html';
            } else {
                window.location.href = 'create-reviewer.html';
            }
        };
    </script>
</body>
</html>